resource "gitlab_project" "full_project" {
  name                                             = "Full Project"
  path                                             = "full-project"
  namespace_id                                     = 123
  description                                      = "Full project description"
  visibility_level                                 = "private"
  container_registry_access_level                  = "enabled"
  issues_access_level                              = "enabled"
  repository_access_level                          = "enabled"
  merge_requests_access_level                      = "enabled"
  forking_access_level                             = "private"
  wiki_access_level                                = "enabled"
  builds_access_level                              = "enabled"
  snippets_access_level                            = "enabled"
  pages_access_level                               = "enabled"
  releases_access_level                            = "enabled"
  analytics_access_level                           = "enabled"
  operations_access_level                          = "enabled"
  environments_access_level                        = "enabled"
  feature_flags_access_level                       = "enabled"
  infrastructure_access_level                      = "enabled"
  monitor_access_level                             = "enabled"
  requirements_access_level                        = "enabled"
  security_and_compliance_access_level             = "enabled"
  model_experiments_access_level                   = "enabled"
  model_registry_access_level                      = "enabled"
  default_branch                                   = "main"
  topics                                           = ["topic-a", "topic-b"]
  merge_method                                     = "rebase_merge"
  squash_option                                    = "always"
  merge_commit_template                            = "merge {{title}}"
  squash_commit_template                           = "squash {{title}}"
  suggestion_commit_message                        = "suggest {{title}}"
  issue_branch_template                            = "issue-{{iid}}"
  issues_template                                  = "issues.md"
  merge_requests_template                          = "merge_requests.md"
  build_coverage_regex                             = "cov"
  build_git_strategy                               = "clone"
  auto_cancel_pending_pipelines                    = "enabled"
  auto_devops_deploy_strategy                      = "continuous"
  ci_config_path                                   = ".gitlab-ci.yml"
  ci_default_git_depth                             = 20
  ci_delete_pipelines_in_seconds                   = 3600
  ci_id_token_sub_claim_components                 = ["project_path", "ref_type"]
  ci_restrict_pipeline_cancellation_role           = "private"
  ci_pipeline_variables_minimum_override_role      = "developer"
  repository_storage                               = "default"
  import_url                                       = "https://example.com/full.git"
  external_authorization_classification_label      = "secret"
  build_timeout                                    = 600
  issues_enabled                                   = false
  merge_requests_enabled                           = false
  wiki_enabled                                     = false
  snippets_enabled                                 = false
  container_registry_enabled                       = false
  shared_runners_enabled                           = false
  group_runners_enabled                            = false
  packages_enabled                                 = false
  lfs_enabled                                      = true
  request_access_enabled                           = true
  autoclose_referenced_issues                      = true
  merge_pipelines_enabled                          = true
  merge_trains_enabled                             = true
  merge_trains_skip_train_allowed                  = true
  mirror                                           = true
  mirror_user_id                                   = 99
  mirror_trigger_builds                            = true
  only_mirror_protected_branches                   = true
  mirror_overwrites_diverged_branches              = true
  resource_group_default_process_mode              = "oldest_first"
  keep_latest_artifact                             = true
  max_artifacts_size                               = 123
  mr_default_target_self                           = true
  prevent_merge_without_jira_issue                 = true
  allow_pipeline_trigger_approve_deployment        = true
  auto_duo_code_review_enabled                     = true
  printing_merge_request_link_enabled              = true
  ci_forward_deployment_enabled                    = true
  ci_forward_deployment_rollback_allowed           = true
  ci_push_repository_for_job_token_allowed         = true
  ci_separated_caches                              = true
  enforce_auth_checks_on_uploads                   = true
  public_jobs                                      = true
  allow_merge_on_skipped_pipeline                  = true
  only_allow_merge_if_pipeline_succeeds            = true
  only_allow_merge_if_all_discussions_are_resolved = true
  remove_source_branch_after_merge                 = true
  resolve_outdated_diff_discussions                = true
  auto_devops_enabled                              = true
  emails_enabled                                   = false
  container_expiration_policy {
    cadence           = "1d"
    keep_n            = 5
    older_than        = "7d"
    name_regex_delete = ".*"
    name_regex_keep   = "keep.*"
    enabled           = true
  }
}

resource "gitlab_project" "legacy_policy" {
  name                       = "Legacy Policy"
  path                       = "legacy-policy"
  namespace_id               = 321
  issues_enabled             = false
  merge_requests_enabled     = false
  wiki_enabled               = false
  snippets_enabled           = false
  container_registry_enabled = false
  shared_runners_enabled     = false
  group_runners_enabled      = false
  packages_enabled           = false
  emails_enabled             = false
  container_expiration_policy {
    cadence           = "2d"
    name_regex_delete = "legacy.*"
    enabled           = true
  }
}

